(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{118:function(t,e,n){},139:function(t,e,n){var i={"./01d.svg":140,"./01n.svg":141,"./02d.svg":142,"./02n.svg":143,"./03d.svg":144,"./03n.svg":145,"./04d.svg":146,"./04n.svg":147,"./09d.svg":148,"./10d.svg":149,"./10n.svg":150,"./11d.svg":151,"./13d.svg":152,"./50d.svg":153,"./50n.svg":154,"./cold.svg":155,"./compass.svg":156,"./hot.svg":157,"./humidity.svg":73,"./pin.svg":76,"./pollution.svg":75,"./pressure.svg":77,"./storm.svg":158,"./temperature.svg":159,"./warm.svg":160,"./windy.svg":74};function r(t){var e=a(t);return n(e)}function a(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=a,t.exports=r,r.id=139},140:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/01d.4eccead1.svg"},141:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/01n.27c17ca4.svg"},142:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/02d.0834d4ae.svg"},143:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/02n.bcb9f6c4.svg"},144:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/03d.fcffee55.svg"},145:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/03n.fcffee55.svg"},146:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/04d.09a2ccb9.svg"},147:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/04n.09a2ccb9.svg"},148:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/09d.b1c4d2b1.svg"},149:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/10d.767428d2.svg"},150:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/10n.53e902f6.svg"},151:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/11d.b98b90e2.svg"},152:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/13d.b349810c.svg"},153:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/50d.0d9f5d0f.svg"},154:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/50n.0d9f5d0f.svg"},155:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/cold.bb3f3a64.svg"},156:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/compass.17d02650.svg"},157:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/hot.49f0818b.svg"},158:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/storm.e07894e6.svg"},159:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/temperature.9c116125.svg"},160:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/warm.9c116125.svg"},174:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),a=n(13),c=n.n(a),s=(n(118),n(37)),o=n(16),u=n(9),l=n(23),d=n(20),h=n(8),v=n.n(h),f=n(12),p=n(22),j=n(5),b=function(){function t(e){var n=e.geoData,i=e.cities,r=e.api;Object(d.a)(this,t),this.weatherData={},this.isLoaded=!1,this.api=r,this.geoData=n,this.cities=i,Object(j.f)(this,{weatherData:j.g,isLoaded:j.g,fetchWeatherData:j.b.bound,setWeatherData:j.b.bound})}return Object(p.a)(t,[{key:"setWeather",value:function(t){return this.weatherData=t}},{key:"fetchWeatherData",value:function(){var t=Object(f.a)(v.a.mark((function t(e){var n,i,r,a,c,s,o,l,d=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.city,r=e.state,a=e.country,c=e.id,this.isLoaded=!1,t.next=4,null===(n=this.api)||void 0===n?void 0:n.getDataForCity(i,r,a);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0={};case 7:s=t.t0,o=s.status,l=s.data,Object(j.h)((function(){var t;if(null===(t=d.api)||void 0===t?void 0:t.isSuccess(o)){var e,n=Object(u.a)(Object(u.a)({},l),{},{id:c,isLoaded:!0});d.setWeather(n),null===(e=d.cities)||void 0===e||e.setLoadedCity(n,a),d.isLoaded=!0}d.isLoaded=!0}));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setWeatherData",value:function(t){var e,n=this,i=null===(e=this.cities)||void 0===e?void 0:e.findCity(t),r=i.isLoaded,a=i.city,c=i.state,s=i.country,o=i.id;r?Object(j.h)((function(){var t;n.setWeather(i),null===(t=n.cities)||void 0===t||t.setCurrentCityId(o)})):this.fetchWeatherData({city:a,state:c,country:s,id:o})}},{key:"fetchLocalWeatherData",value:function(){var t=Object(f.a)(v.a.mark((function t(e){var n,i,r,a,c,s,o,u,l,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=!this.geoData.isLoaded,!t.t0){t.next=4;break}return t.next=4,this.geoData.fetchGeoData();case 4:if(n=this.geoData.localization,i=n.country,r=n.state,a=n.city){t.next=15;break}return t.next=8,null===(c=this.api)||void 0===c?void 0:c.getCitiesForState(i,r);case 8:if(t.t1=t.sent,t.t1){t.next=11;break}t.t1={};case 11:u=t.t1,l=u.status,d=u.data,a=(null===(s=this.api)||void 0===s?void 0:s.isSuccess(l))?null===(o=d[0])||void 0===o?void 0:o.city:a;case 15:a&&this.fetchWeatherData({city:a,country:i,state:r,id:e});case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),y=n(60),g=n(93),O=n(42),x=36e5,m=n(15),C=function(){function t(){Object(d.a)(this,t)}return Object(p.a)(t,null,[{key:"saveStore",value:function(t){var e;(null===(e=window)||void 0===e?void 0:e.localStorage)&&Object.entries(t).forEach((function(t){var e=Object(m.a)(t,2),n=e[0],i=e[1];return window.localStorage.setItem(n,JSON.stringify(i))}))}},{key:"getStore",value:function(t){var e;return(null===(e=window)||void 0===e?void 0:e.localStorage)&&JSON.parse(window.localStorage.getItem(t))}}]),t}(),w=function(){function t(e){Object(d.a)(this,t),this.country="",this.cities=[],this.isLoaded=!1,this.isFetching=!1,this.currentCity=null,this.currentCountry=null,this.filter="",this.offset=0,this.limit=5,this.api=e,Object(j.f)(this,{country:j.g,isLoaded:j.g,isFetching:j.g,cities:j.g,filter:j.g,currentCity:j.g,currentCountry:j.g,fetchCitiesForCountry:j.b.bound,setFilter:j.b.bound,setLoadedCity:j.b.bound,setCurrentCity:j.b.bound,filtered:j.c,sorted:j.c,loaded:j.c}),this.initStorage()}return Object(p.a)(t,[{key:"sorted",get:function(){return Object(O.a)(this.cities).sort((function(t,e){return(null===t||void 0===t?void 0:t.city)<(null===e||void 0===e?void 0:e.city)?-1:1}))}},{key:"filtered",get:function(){var t,e=null===(t=this.filter)||void 0===t?void 0:t.toLowerCase();return this.cities.filter((function(t){var n,i;return null===t||void 0===t||null===(n=t.city)||void 0===n||null===(i=n.toLowerCase())||void 0===i?void 0:i.includes(e)})).sort((function(t,n){var i,r,a,c;return(null===t||void 0===t||null===(i=t.city)||void 0===i||null===(r=i.toLowerCase())||void 0===r?void 0:r.indexOf(e))-(null===n||void 0===n||null===(a=n.city)||void 0===a||null===(c=a.toLowerCase())||void 0===c?void 0:c.indexOf(e))}))}},{key:"loaded",get:function(){var t,e=[],n=Object(g.a)(this.cities);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!i.isLoaded)return e;e.push(i)}}catch(r){n.e(r)}finally{n.f()}return e}},{key:"setFilter",value:function(t){return this.filter=String(t)}},{key:"setCities",value:function(t){return this.cities=Array.isArray(t)?t:[t]}},{key:"setCurrentCity",value:function(t){return this.currentCity=t}},{key:"setCurrentCountry",value:function(t){return this.currentCountry=t}},{key:"loadCityWeather",value:function(){var t=Object(f.a)(v.a.mark((function t(e){var n,i,r,a,c,s,o,l,d,h,f,p,b=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.cities.find((function(t,n){var i=t.id===e;return i&&(r=n),i}))||{},void 0!==r){t.next=3;break}return t.abrupt("return");case 3:if(c=a.isLoaded,s=a.city,o=a.state,l=a.country,!c){t.next=7;break}return Object(j.h)((function(){b.setCurrentCity(a),b.isLoaded=!0})),t.abrupt("return");case 7:return t.next=9,null===(n=this.api)||void 0===n?void 0:n.getDataForCity(s,o,l);case 9:d=t.sent,h=d.status,f=d.data,(null===(i=this.api)||void 0===i?void 0:i.isSuccess(h))&&((p=Object(O.a)(this.cities))[r]=Object(u.a)(Object(u.a)({},f),{},{id:e,isLoaded:!0}),Object(j.h)((function(){b.setCities(p),b.setCurrentCity(b.cities[r]),b.isLoaded=!0})),this.setCitiesWeatherToStorage(this.cities,l,!0));case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"loadCitiesWeather",value:function(){var t=Object(f.a)(v.a.mark((function t(){var e,n,i,r,a,c,s,o,l,d,h,f,p,b=this,g=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=g.length>0&&void 0!==g[0]?g[0]:this.currentCountry,i=C.getStore("fetched"),r=i[n]||{},a=r.fullyFetchedQuantity,c=r.timestamp,s=Date.now(),(o=s-c>3*x)&&(this.offset=0),l=this.offset+this.limit,null===(d=this.cities.slice(this.offset,l))||void 0===d?void 0:d.length){t.next=10;break}return t.abrupt("return");case 10:if(Object(j.h)((function(){b.isFetching=!0})),!(h=(null!==a&&void 0!==a?a:0)<l||o)){t.next=18;break}return t.next=15,null===(e=this.api)||void 0===e?void 0:e.getWeatherForCities(d);case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=this.getCitiesFromStorage(n);case 19:f=t.t0,p=Object(O.a)(this.cities),null===f||void 0===f||f.forEach((function(t){p[t.id]&&(p[t.id]=t)})),h&&(C.saveStore({fetched:Object(u.a)(Object(u.a)({},i),{},Object(y.a)({},n,{timestamp:!c||o?s:c,fullyFetchedQuantity:l}))}),this.setCitiesWeatherToStorage(p,n,!0)),Object(j.h)((function(){b.setCities(p),b.isFetching=!1,b.offset=l}));case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"findCity",value:function(t){return this.cities.find((function(e){return e.id===t}))}},{key:"filterByName",value:function(t){return this.cities.filter((function(e){return e.name===t}))}},{key:"filterByState",value:function(t){return this.cities.filter((function(e){return e.state===t}))}},{key:"getLoaded",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.cities.filter((function(e){return e.isLoaded===t}))}},{key:"checkIsWeatherLoaded",value:function(t){var e;return!!(null===(e=this.cities.find((function(e){return e.id===t})))||void 0===e?void 0:e.isLoaded)}},{key:"setLoadedCity",value:function(t,e){if(null===t||void 0===t?void 0:t.id){var n=Object(O.a)(this.cities);n[t.id]&&(n[t.id]=t),this.setCitiesWeatherToStorage(n,e,!0),this.setCities(n)}}},{key:"fetchCitiesForCountry",value:function(){var t=Object(f.a)(v.a.mark((function t(e){var n,i,r,a,c,s,o=this,u=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=u.length>1&&void 0!==u[1]&&u[1],!this.isLoaded||i){t.next=3;break}return t.abrupt("return");case 3:if(r=this.handleTimeUp(e),this.isLoaded=!1,a=this.getFromStorage(e),!(c=r||!(null===a||void 0===a?void 0:a.length))){t.next=13;break}return t.next=10,null===(n=this.api)||void 0===n?void 0:n.getCities(e);case 10:t.t0=t.sent,t.next=14;break;case 13:t.t0=a;case 14:s=t.t0,Object(j.h)((function(){o.setCities(s),o.isLoaded=!0,o.offset=0,o.limit=5,o.setCurrentCountry(e)})),c&&this.saveToStorage(s,e);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleTimeUp",value:function(t){var e=(C.getStore("fetched")[t]||{}).timestamp;return Date.now()-e>3*x}},{key:"initStorage",value:function(){C.getStore("cities")||C.saveStore({cities:{}}),C.getStore("fetched")||C.saveStore({fetched:{}})}},{key:"getCitiesFromStorage",value:function(t){var e;return null===(e=C.getStore("cities")[t])||void 0===e?void 0:e.slice(this.offset,this.limit+this.offset)}},{key:"getFromStorage",value:function(t){return C.getStore("cities")&&C.getStore("cities")[t]}},{key:"saveToStorage",value:function(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=C.getStore("cities");(null===(n=r[e])||void 0===n?void 0:n.length)&&!i||C.saveStore({cities:Object(u.a)(Object(u.a)({},r),{},Object(y.a)({},e,t))})}},{key:"setCitiesWeatherToStorage",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n){var i=this.getFromStorage(e),r=Array.isArray(i)?Object(O.a)(i):[];return null===t||void 0===t||t.forEach((function(t){var e;(null===i||void 0===i?void 0:i.find((function(n,i){var r=n.id,a=!n.isLoaded&&r&&r===(null===t||void 0===t?void 0:t.id);return a&&(e=i),a})))&&(r[e]=Object(u.a)(Object(u.a)({},r[e]),t))})),this.saveToStorage(r,e,!0),r}this.saveToStorage(t,e,!0)}}]),t}(),k=function(t,e,n){return null===n||void 0===n||n(),function(t,e){return S.apply(this,arguments)}(Promise.resolve(t).then((function(t){return[t,void 0]})).catch((function(t){return Promise.resolve([void 0,t])})),e)};function S(){return(S=Object(f.a)(v.a.mark((function t(e,n){var i,r,a,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(i=t.sent,r=Object(m.a)(i,2),a=r[0],!(c=r[1])){t.next=9;break}return console.error(c),t.abrupt("return",n);case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var N=function(t){return"function"===typeof t},L=function(){function t(e){Object(d.a)(this,t),this.isLoaded=!1,this.filter="",this.countries=[],Object(j.f)(this,{isLoaded:j.g,countries:j.g,filter:j.g,setFilter:j.b.bound,filtered:j.c,sorted:j.c,fetchCountries:j.b.bound}),this.api=e,this.initStorage()}return Object(p.a)(t,[{key:"setCountries",value:function(t){return this.countries=Array.isArray(t)?t:[t]}},{key:"setFilter",value:function(t){return this.filter=String(t)}},{key:"findCountry",value:function(t){return this.countries.find((function(e){return e===t}))}},{key:"filtered",get:function(){return function(t,e){var n=null===t||void 0===t?void 0:t.toLowerCase();return e.filter((function(t){var e;return null===t||void 0===t||null===(e=t.toLowerCase())||void 0===e?void 0:e.includes(n)})).sort((function(t,e){var i,r;return(null===t||void 0===t||null===(i=t.toLowerCase())||void 0===i?void 0:i.indexOf(n))-(null===e||void 0===e||null===(r=e.toLowerCase())||void 0===r?void 0:r.indexOf(n))}))}(this.filter,this.countries)}},{key:"sorted",get:function(){return Object(O.a)(this.countries).sort()}},{key:"fetchCountries",value:function(){var t=Object(f.a)(v.a.mark((function t(){var e,n,i,r,a,c,s,o,u=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLoaded){t.next=2;break}return t.abrupt("return");case 2:if(i=C.getStore("countries"),!(r=!(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.length))){t.next=10;break}return t.next=7,null===(n=this.api)||void 0===n?void 0:n.getSupportedCountries();case 7:t.t1=t.sent,t.next=11;break;case 10:t.t1=i;case 11:if(t.t0=t.t1,t.t0){t.next=14;break}t.t0={};case 14:a=t.t0,c=a.data,s=a.status,o=null===c||void 0===c?void 0:c.map((function(t){return t.country})),r&&C.saveStore({countries:{data:c,status:s}}),Object(j.h)((function(){var t;(null===(t=u.api)||void 0===t?void 0:t.isSuccess(s))&&u.setCountries(o),u.isLoaded=!0}));case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initStorage",value:function(){C.getStore("countries")||C.saveStore({countries:{}})}}]),t}(),I=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.lat,r=n.lon;Object(d.a)(this,t),this.coordinates={lat:null,lon:null},this.locality="",this.country="",this.region="",this.isLoaded=!1,this.geocodeService=e,Object(j.f)(this,{coordinates:j.g,locality:j.g,country:j.g,region:j.g,isLoaded:j.g,localization:j.c,fetchGeoData:j.b.bound}),void 0!==(i&&r)?this.setCoordinates({lat:i,lon:r}):this.getDeviceCoordinates()}return Object(p.a)(t,[{key:"setCoordinates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lat,n=t.lon;return this.coordinates={lat:e,lon:n}}},{key:"setIsLoaded",value:function(t){return this.isLoaded=t}},{key:"setLocality",value:function(t){return this.locality=t}},{key:"setCountry",value:function(t){return this.country=t}},{key:"setRegion",value:function(t){return this.region=t}},{key:"getDeviceCoordinates",value:function(){var t=this;navigator&&navigator.geolocation.getCurrentPosition((function(e){var n=e.coords||{},i=n.latitude,r=n.longitude;t.setCoordinates({lat:i,lon:r})}))}},{key:"localization",get:function(){return{lat:this.coordinates.lat,lon:this.coordinates.lon,city:this.locality,country:this.country,state:this.region}}},{key:"fetchGeoData",value:function(){var t=Object(f.a)(v.a.mark((function t(){var e,n,i,r,a,c,s,o,u,l,d=this,h=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.length>0&&void 0!==h[0]&&h[0],!this.isLoaded||n){t.next=3;break}return t.abrupt("return");case 3:return i=this.coordinates,r=i.lat,a=i.lon,t.next=6,null===(e=this.geocodeService)||void 0===e?void 0:e.getGeoData({lat:r,lon:a});case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:c=t.t0,s=c.locality,o=c.country,u=c.region,l=c.coords,Object(j.h)((function(){s&&d.setLocality(s),o&&d.setCountry(o),u&&d.setRegion(u),l&&d.setCoordinates(l),d.setIsLoaded(!0)}));case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),W=n(41),F=n.n(W),D={Accept:"*/*","Content-Type":"application/json"},z=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.baseUrl,i=e.keys;Object(d.a)(this,t),this.baseUrl="",this.keys="",this.requestsQuantity=0,this.baseUrl=null!==n&&void 0!==n?n:this.baseUrl,this.keys=null!==i&&void 0!==i?i:this.keys,this._resetRequestsQuantity()}return Object(p.a)(t,[{key:"getSupportedCountries",value:function(){var t=Object(f.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(F.a.get("".concat(this.baseUrl,"/countries"),{params:{key:this._getKey()},headers:D}),this.incrementRequestsQuantity());case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSupportedStatesForCountry",value:function(){var t=Object(f.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(F.a.get("".concat(this.baseUrl,"/states"),{params:{country:e,key:this._getKey()},headers:D}),this.incrementRequestsQuantity());case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCitiesForState",value:function(){var t=Object(f.a)(v.a.mark((function t(e,n){var i,r,a,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(F.a.get("".concat(this.baseUrl,"/cities"),{params:{country:e,state:n,key:this._getKey()},headers:D}),this.incrementRequestsQuantity());case 2:return i=t.sent,r=(null===i||void 0===i?void 0:i.data)||{},a=r.data,c=r.status,t.abrupt("return",this.isSuccess(c)?null===a||void 0===a?void 0:a.map((function(t){return{city:t.city,country:e,state:n}})):[]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getCities",value:function(){var e=Object(f.a)(v.a.mark((function e(n){var i,r,a,c,s=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupportedStatesForCountry(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(i=e.t0,r=i.status,a=i.data,this.isSuccess(r)){e.next=12;break}return e.next=11,Promise.resolve([]);case 11:return e.abrupt("return",e.sent);case 12:return e.next=14,Promise.all(a.map((function(t){return s.getCitiesForState(n,null===t||void 0===t?void 0:t.state)}))).catch((function(t){return console.error(t)}));case 14:return c=e.sent,e.abrupt("return",t.mapCities(t.flatCities(c)));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDataForCity",value:function(){var t=Object(f.a)(v.a.mark((function t(e,n,i){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(F.a.get("".concat(this.baseUrl,"/city"),{params:{city:e,country:i,state:n,key:this._getKey()},headers:D}),this.incrementRequestsQuantity());case 2:return r=t.sent,t.next=5,null===r||void 0===r?void 0:r.data;case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}()},{key:"getWeatherForCities",value:function(){var t=Object(f.a)(v.a.mark((function t(e){var n,i=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map(function(){var t=Object(f.a)(v.a.mark((function t(e){var n,r,a,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.city,r=e.state,a=e.country,t.next=3,i.getDataForCity(n,r,a);case 3:return c=t.sent,t.abrupt("return",i.mapResponse(Object(u.a)({},c),e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).catch((function(t){return console.error(t)}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"incrementRequestsQuantity",value:function(){this.requestsQuantity++}},{key:"_resetRequestsQuantity",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;setInterval((function(){return t._resetRequestsQuantity=0}),e)}},{key:"_getKey",value:function(){return this.keys[this.requestsQuantity%this.keys.length]}},{key:"getDataForLocalization",value:function(){var t=Object(f.a)(v.a.mark((function t(){var e,n,i,r,a,c=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:{},n=e.lat,i=e.lon,r=void 0!==(n&&i)?{key:this._getKey(),lat:n,lon:i}:{key:this._getKey()},t.next=4,k(F.a.get("".concat(this.baseUrl,"/nearest_station"),{params:r}),this.incrementRequestsQuantity());case 4:return a=t.sent,t.abrupt("return",null===a||void 0===a?void 0:a.data);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isSuccess",value:function(t){return/^success$/.test(t)}},{key:"mapResponse",value:function(t,e){var n=t.data,i=t.status;return this.isSuccess(i)&&n?Object(u.a)(Object(u.a)(Object(u.a)({},e),n),{},{isLoaded:!0}):Object(u.a)({},e)}}],[{key:"mapCities",value:function(t){return t.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e,isLoaded:!1})}))}},{key:"withTimeout",value:function(t,e){return new Promise((function(n){setTimeout((function(){return n(t())}),e)}))}},{key:"flatCities",value:function(t){return(Array.isArray(t)?t:[t]).flat()}}]),t}())({baseUrl:"https://api.airvisual.com/v2",keys:["b7eb833a-98a7-4fe4-bbda-bb6a14f6dc1d","d9509582-9037-4161-a64a-36b937383002","4cf748f7-a304-458a-882e-a8199762b5a2","f3ea14a7-e49d-4dbb-a423-6c53450c795e","402fd72e-367e-49c1-8245-865a860e4c12","67755a39-746c-423e-b677-86b4581ea3f9","f2647f3a-2d5c-480f-a75c-d0808a20a1a5","d08400d1-9bd3-4fcc-a474-08732fecfb77"]}),T=Object.freeze({locality:"Warsaw",country:"Poland",region:"Mazovia",coords:{lat:52.229676,lon:21.012229}}),R={baseUrl:"http://api.positionstack.com/v1",key:"e452d31bada2d23e9877efc5aec49a85"},U=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,n=e.baseUrl,i=e.key;Object(d.a)(this,t),this.baseUrl="",this.key="",this.baseUrl=null!==n&&void 0!==n?n:this.baseUrl,this.key=null!==i&&void 0!==i?i:this.key}return Object(p.a)(t,[{key:"getGeoData",value:function(){var t=Object(f.a)(v.a.mark((function t(e){var n,i,r,a,c,s,o,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.lat,r=e.lon,a={access_key:this.key,query:"".concat(i,",").concat(r)},t.next=4,k(F.a.get("".concat(this.baseUrl,"/reverse"),{params:a}));case 4:return c=t.sent,s=(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.data)||[T],o=Object(m.a)(s,1),u=o[0],t.abrupt("return",u);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}()),P=n(2),A=new L(z),Q=new I(U),q=new w(z),E=new function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.countryCitiesStore,i=e.cityWeatherStore,r=e.supportedCountriesStore,a=e.geoDataStore;Object(d.a)(this,t),this.cities=n,this.cityWeather=i,this.countries=r,this.localization=a}({countryCitiesStore:q,cityWeatherStore:new b({geoData:Q,cities:q,api:z}),supportedCountriesStore:A,geoDataStore:Q}),_=r.a.createContext(),M=function(t){var e=t.children;return Object(P.jsx)(_.Provider,{value:E,children:e})},H=n(73),K=n(74),G=n(75),B=n(76),V=n(77);function J(t,e){return Object(i.useMemo)((function(){return Object.freeze({weather:Y(t),temperature:Y(Z(e)),humidity:H.default,wind:K.default,pollution:G.default,pin:B.default,pressure:V.default})}),[t,e])}function Y(t){return t&&n(139)("./".concat(t,".svg")).default}function Z(t){return t<0?"cold":t<20?"warm":"hot"}var $=n(204),X=n(177),tt=n(207),et=Object($.a)({wrapper:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",minHeight:160,padding:"16px 42px 52px",margin:"60px 0"}});var nt=Object(l.a)((function(t){var e,n=t.children,r=Object(i.useContext)(_).cityWeather,a=et(),c=((null===r||void 0===r||null===(e=r.weatherData)||void 0===e?void 0:e.current)||{weather:{}}).weather,s=J(c.ic,c.tp);return Object(P.jsx)(P.Fragment,{children:N(n)&&Object(P.jsx)(X.a,{className:a.wrapper,children:r.isLoaded?n(Object(u.a)(Object(u.a)({},r),{},{icons:s})):Object(P.jsx)(tt.a,{})})})})),it=n(227);function rt(t,e){var n;return function(i){clearTimeout(n),n=setTimeout((function(){t(i)}),e)}}var at=Object(l.a)((function(t){var e=t.renderInput,n=t.children,r=Object(i.useContext)(_),a=r.cities,c=r.countries,s=Object(o.g)(),u=Object(i.useState)(""),l=Object(m.a)(u,2),d=l[0],h=l[1],v=Object(i.useState)(!1),f=Object(m.a)(v,2),p=f[0],j=f[1],b=Object(i.useCallback)(rt(g(c.setFilter),300),[]),y=Object(i.useCallback)(rt(g(a.setFilter),300),[]);function g(t){return function(e){j(!!(null===e||void 0===e?void 0:e.length)),t(e)}}return Object(i.useEffect)((function(){b(d),y(d)}),[d]),Object(P.jsxs)(it.a,{children:[Object(P.jsx)("form",{noValidate:!0,autoComplete:"off",children:N(e)&&e({input:d,handleInputChange:function(t){return h(t.target.value)}})}),N(n)&&n({countries:c.filtered,cities:a.filtered,currentCountry:a.currentCountry,goToCountryView:function(t){return function(){return s.push("/country/".concat(t),{toTopInMount:!0})}},goToCityView:function(t){var e=t.city,n=t.state,i=t.country,r=t.id;return function(){return s.push("/city/".concat(i,"/").concat(n,"/").concat(e,"?cityId=").concat(r))}},shouldDisplay:p})]})})),ct=n(208),st=n(228),ot=n(226),ut=n(212),lt=Object($.a)({formControl:{width:640,maxWidth:"90vw"},wrapper:{margin:"16px 0"}});var dt=Object(l.a)((function(){var t,e=Object(i.useContext)(_),n=e.countries,r=e.cities,a=e.localization,c=Object(i.useCallback)((function(t){return r.fetchCitiesForCountry(t.target.value,!0)}),[r]),s=lt(),o=null!==(t=r.currentCountry)&&void 0!==t?t:a.country;return Object(P.jsx)(it.a,{className:s.wrapper,children:Object(P.jsxs)(ct.a,{className:s.formControl,children:[Object(P.jsx)(st.a,{id:"demo-simple-select-label",children:"Country"}),Object(P.jsx)(ot.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:c,value:o,children:n.sorted.map((function(t){return Object(P.jsx)(ut.a,{value:t,children:t},t)}))})]})})})),ht=Object($.a)({wrapper:{display:"flex",justifyContent:"center",alignItems:"center",margin:"16px 0"}});var vt=Object(l.a)((function(){var t=ht(),e=Object(i.useContext)(_)||{cities:{}},n=e.cities,r=n.currentCountry,a=n.isLoaded,c=e.localization.region,o=null!==r&&void 0!==r?r:c;return Object(P.jsx)(it.a,{className:t.wrapper,children:a?Object(P.jsxs)(s.b,{to:{pathname:"country/".concat(o),state:{toTopInMount:!0}},children:["All cities for ",o]}):Object(P.jsx)(tt.a,{})})})),ft=n(213),pt=n(214);function jt(){var t=Object(i.useState)({}),e=Object(m.a)(t,2),n=e[0],r=e[1],a=Object(i.useRef)();Object(i.useEffect)((function(){return o(),a.current=setInterval(o,1e3),function(){return clearInterval(a.current)}}),[]);var c,s=Object(i.useCallback)((c=0,function(t){return function(e){return"".concat(t(e)?c:"").concat(e)}})((function(t){return Number(t)<10})),[]);function o(){var t=new Date,e={hours:s(t.getHours()),minutes:s(t.getMinutes()),seconds:s(t.getSeconds())};r(e)}var u=n.hours,l=n.minutes,d=n.seconds;return Object(P.jsxs)(ft.a,{variant:"h5",children:[Object(P.jsx)("span",{children:u}),":",Object(P.jsx)("span",{children:l}),":",Object(P.jsx)("span",{children:d})]})}var bt=Object($.a)({localizationIcon:{position:"absolute",top:-20,right:-20,width:38},data:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0 32px 24px"},dataWrapper:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start"},rowWrapper:{display:"flex",flexDirection:"row",padding:"6px 56px",alignItems:"center",justifyContent:"center",wrap:"wrap"},icon:{height:42,paddingRight:6},weatherIcon:{height:"100%",display:"block"},weatherIconWrapper:{height:180},wrapper:{position:"relative",minHeight:160,padding:"16px 42px 52px",margin:"60px 0"}});function yt(t){var e,n,i,r,a,c,s,o,u,l,d=t.weatherData,h=(t.geoData,t.icons),v=bt();return Object(P.jsxs)(it.a,{children:[Object(P.jsx)(ft.a,{align:"center",variant:"h5",paragraph:!0,children:"Your localization"}),Object(P.jsxs)(pt.a,{container:!0,alignItems:"center",justify:"flex-start",spacing:2,children:[Object(P.jsx)(pt.a,{item:!0,className:v.weatherIconWrapper,children:Object(P.jsx)("img",{className:v.weatherIcon,alt:"current weather icon",src:null===h||void 0===h?void 0:h.weather})}),Object(P.jsx)(pt.a,{item:!0,children:Object(P.jsxs)(ft.a,{color:"primary",variant:"h1",children:[null===d||void 0===d||null===(e=d.current)||void 0===e||null===(n=e.weather)||void 0===n?void 0:n.tp," \xb0C"]})}),Object(P.jsx)(pt.a,{item:!0,className:v.weatherIconWrapper,children:Object(P.jsxs)(it.a,{className:v.rowWrapper,children:[Object(P.jsxs)(it.a,{className:v.dataWrapper,children:[Object(P.jsxs)(it.a,{className:v.data,children:[Object(P.jsx)("img",{className:v.icon,alt:"humidity icon",src:null===h||void 0===h?void 0:h.humidity}),Object(P.jsxs)(it.a,{className:v.dataWrapper,children:[Object(P.jsx)(ft.a,{variant:"subtitle1",children:"Humidity"}),Object(P.jsxs)(ft.a,{variant:"h5",children:[null===d||void 0===d||null===(i=d.current)||void 0===i||null===(r=i.weather)||void 0===r?void 0:r.hu,"%"]})]})]}),Object(P.jsxs)(it.a,{className:v.data,children:[Object(P.jsx)("img",{className:v.icon,alt:"humidity icon",src:null===h||void 0===h?void 0:h.pressure}),Object(P.jsxs)(it.a,{className:v.dataWrapper,children:[Object(P.jsx)(ft.a,{variant:"subtitle1",children:"Pressure"}),Object(P.jsxs)(ft.a,{variant:"h5",children:[null===d||void 0===d||null===(a=d.current)||void 0===a||null===(c=a.weather)||void 0===c?void 0:c.pr," hPa"]})]})]})]}),Object(P.jsxs)(it.a,{className:v.dataWrapper,children:[Object(P.jsxs)(it.a,{className:v.data,children:[Object(P.jsx)("img",{className:v.icon,alt:"wind speed icon",src:null===h||void 0===h?void 0:h.wind}),Object(P.jsxs)(it.a,{className:v.dataWrapper,children:[Object(P.jsx)(ft.a,{variant:"subtitle1",children:"Wind speed"}),Object(P.jsxs)(ft.a,{variant:"h5",children:[null===d||void 0===d||null===(s=d.current)||void 0===s||null===(o=s.weather)||void 0===o?void 0:o.ws," m/s"]})]})]}),Object(P.jsxs)(it.a,{className:v.data,children:[Object(P.jsx)("img",{className:v.icon,alt:"humidity icon",src:null===h||void 0===h?void 0:h.pollution}),Object(P.jsxs)(it.a,{className:v.dataWrapper,children:[Object(P.jsx)(ft.a,{variant:"subtitle1",children:"Pollution"}),Object(P.jsxs)(ft.a,{variant:"h5",children:[null===d||void 0===d||null===(u=d.current)||void 0===u||null===(l=u.pollution)||void 0===l?void 0:l.aqius," AQI"]})]})]})]})]})}),Object(P.jsxs)(pt.a,{item:!0,className:v.weatherIconWrapper,children:[Object(P.jsx)(ft.a,{variant:"overline",children:d.country}),Object(P.jsx)(ft.a,{color:"textSecondary",variant:"subtitle2",children:d.state}),Object(P.jsx)(ft.a,{color:"secondary",paragraph:!0,variant:"h3",children:d.city}),Object(P.jsx)(jt,{})]})]}),Object(P.jsx)("img",{className:v.localizationIcon,alt:"localization icon",src:null===h||void 0===h?void 0:h.pin})]})}var gt=n(230),Ot=n(211),xt=n(178),mt=n(215),Ct=Object($.a)({search:{width:640,maxWidth:"90vw",margin:"46px 0 32px"},list:{margin:"32px 0"},container:{margin:"20px 0"},wrapper:{position:"absolute",transform:"translateY(-30px)",overflowY:"scroll",width:580,maxWidth:"90vw",height:320,maxHeight:"90vh",backgroundColor:"#ffffff",padding:32,zIndex:2},listItem:{cursor:"pointer"}});function wt(){var t=Ct(),e=Object(i.useCallback)((function(e){var n=e.input,i=e.handleInputChange;return Object(P.jsx)(gt.a,{className:t.search,value:n,onChange:i,id:"outlined-basic",label:"search",placeholder:"City or country...",variant:"outlined"})}),[]),n=Object(i.useCallback)((function(e,n,i){return Object(P.jsxs)(it.a,{className:t.list,children:[Object(P.jsx)(ft.a,{variant:"h5",children:"Countries"}),Object(P.jsx)(Ot.a,{children:null===e||void 0===e?void 0:e.map((function(e){return Object(P.jsx)(xt.a,{className:t.listItem,selected:n===e,onClick:i(e),children:e},e)}))})]})}),[]),r=Object(i.useCallback)((function(e,n,i){return Object(P.jsxs)(it.a,{className:t.list,children:[Object(P.jsxs)(ft.a,{variant:"h5",children:["Cities for ",n]}),Object(P.jsx)(Ot.a,{children:null===e||void 0===e?void 0:e.map((function(e){var n=e.city,r=e.state,a=e.country,c=e.id;return Object(P.jsx)(xt.a,{className:t.listItem,onClick:i({city:n,state:r,country:a,id:c}),children:Object(P.jsxs)(it.a,{children:[Object(P.jsx)(ft.a,{variant:"caption",children:r}),Object(P.jsxs)(ft.a,{variant:"h6",children:[n," "]})]})},c)}))})]})}),[]);return Object(P.jsxs)(it.a,{className:t.container,children:[Object(P.jsxs)(pt.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(P.jsx)(ft.a,{variant:"h5",children:"Find weather"}),Object(P.jsx)(at,{renderInput:e,children:function(e){var i=e.countries,a=e.cities,c=e.goToCityView,s=e.goToCountryView,o=e.shouldDisplay,u=e.currentCountry;return Object(P.jsx)(P.Fragment,{children:o&&Object(P.jsxs)(X.a,{className:t.wrapper,children:[r(a,u,c),Object(P.jsx)(mt.a,{}),n(i,u,s)]})})}}),Object(P.jsx)(dt,{}),Object(P.jsx)(vt,{})]}),Object(P.jsx)(nt,{children:function(t){return Object(P.jsx)(yt,Object(u.a)({},t))}})]})}var kt=n(216),St=n(217),Nt=Object($.a)({fab:{position:"fixed",bottom:60,right:60},data:{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"18px 12px"},card:{padding:24,margin:"32px 0",width:320,cursor:"pointer"},icon:{width:"50%",height:60,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},container:{margin:"24px 0"},wrapper:{minHeight:"90vh",display:"flex",justifyContent:"flex-start",alignItems:"flex-start"}});function Lt(t){var e=t.setRef,n=t.isLast,i=t.onClick,r=t.data||{current:{}},a=r.city,c=r.state,s=r.current,o=s.weather,u=s.pollution,l=Nt(),d=J(null===o||void 0===o?void 0:o.ic,null===o||void 0===o?void 0:o.tp);return Object(P.jsxs)(kt.a,{className:l.card,ref:e(n),onClick:i,children:[Object(P.jsx)(ft.a,{color:"textSecondary",align:"center",variant:"subtitle2",children:c}),Object(P.jsx)(ft.a,{align:"center",paragraph:!0,variant:"h4",children:a}),Object(P.jsxs)(it.a,{className:l.data,children:[Object(P.jsx)(St.a,{className:l.icon,image:null===d||void 0===d?void 0:d.weather}),Object(P.jsxs)(ft.a,{color:"textSecondary",variant:"h4",children:[null===o||void 0===o?void 0:o.tp," \xb0C"," "]})]}),Object(P.jsxs)(it.a,{className:l.data,children:[Object(P.jsx)(St.a,{className:l.icon,image:null===d||void 0===d?void 0:d.pollution}),Object(P.jsxs)(ft.a,{color:"textSecondary",variant:"h4",children:[null===u||void 0===u?void 0:u.aqius," AQI"," "]})]})]})}var It=n(98),Wt=n.n(It),Ft=n(218),Dt=n(220),zt=n(219),Tt=Object($.a)({fab:{position:"fixed",bottom:60,right:60},container:{margin:"24px 0"},wrapper:{minHeight:"90vh",display:"flex",justifyContent:"center",alignItems:"center"},button:{position:"fixed",zIndex:2,left:60,top:60}});var Rt=Object(l.a)((function(){var t=Object(i.useContext)(_).cities,e=Object(o.i)(),n=Object(o.g)(),r=Object(o.h)(),a=Tt(),c=t.currentCountry!==e.country,s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(i.useRef)(),r=Object(i.useRef)();return Object(i.useEffect)((function(){var e,i,a,c;return null===(e=n.current)||void 0===e||null===(i=e.disconnect)||void 0===i||i.call(e),n.current=new IntersectionObserver((function(e){Object(m.a)(e,1)[0].isIntersecting&&t()})),r.current&&(null===(a=n.current)||void 0===a||null===(c=a.observe)||void 0===c||c.call(a,r.current)),function(){var t,e;return null===(t=n.current)||void 0===t||null===(e=t.disconnect)||void 0===e?void 0:e.call(t)}}),Array.isArray(e)?e:[]),function(t){return function(e){t&&(r.current=e)}}}(t.loadCitiesWeather.bind(t),[t.loaded.length,t]);Object(i.useEffect)((function(){!function(t,e){d.apply(this,arguments)}(c,e.country)}),[c,e.country,t]),Object(i.useEffect)((function(){var t;(null===(t=r.state)||void 0===t?void 0:t.toTopInMount)&&l()}),[r.state]);var u=function(t){var e=t.country,i=t.state,r=t.city,a=t.id;return function(){return n.push("/city/".concat(e,"/").concat(i,"/").concat(r,"?cityId=").concat(a))}},l=function(){return window.scrollTo({top:0,behavior:"smooth"})};function d(){return(d=Object(f.a)(v.a.mark((function e(n,i){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,!e.t0){e.next=4;break}return e.next=4,t.fetchCitiesForCountry(i,!0);case 4:t.loadCitiesWeather();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(P.jsxs)(it.a,{className:a.container,children:[Object(P.jsx)(Ft.a,{color:"primary",className:a.button,onClick:function(){return n.push("/")},children:Object(P.jsx)(zt.a,{fontSize:"large"})}),Object(P.jsx)(ft.a,{variant:"h2",align:"center",children:null===e||void 0===e?void 0:e.country}),Object(P.jsx)(it.a,{className:a.wrapper,children:c?Object(P.jsx)(tt.a,{}):Object(P.jsx)(it.a,{children:t.cities.length?t.loaded.map((function(t,e,n){return Object(P.jsx)(Lt,{setRef:s,isLast:e===n.length-1,onClick:u({city:null===t||void 0===t?void 0:t.city,state:null===t||void 0===t?void 0:t.state,country:null===t||void 0===t?void 0:t.country,id:null===t||void 0===t?void 0:t.id}),data:t},null===t||void 0===t?void 0:t.id)})):Object(P.jsx)(P.Fragment,{children:!t.isFetching&&Object(P.jsxs)(ft.a,{variant:"h5",align:"center",color:"textSecondary",children:["There are no supported cities for ",e.country]})})})}),Object(P.jsx)(Dt.a,{color:"primary",className:a.fab,onClick:l,children:Object(P.jsx)(Wt.a,{})}),t.isFetching&&Object(P.jsx)(tt.a,{})]})})),Ut=n(222),Pt=n(231),At=n(223),Qt=n(224),qt=(n(173),n(30)),Et=n.n(qt),_t=n(99),Mt=n(100),Ht=n(221),Kt=Object($.a)({container:{margin:"24px 0",padding:48,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},wrapper:{width:"100%"},weatherWrapper:{display:"flex",alignItems:"center",justifyContent:"space-around",width:"100%"},weatherIcon:{height:180,display:"block",paddingRight:32},data:{display:"flex",alignItems:"center",justifyContent:"flex-start",margin:"24px 0"},back:{position:"fixed",zIndex:2,left:60,top:60},icon:{paddingRight:12,display:"block",height:48},temperatureIcon:{display:"block",height:80},temperature:{display:"flex",alignItems:"center",justifyContent:"flex-start"},map:{height:360,width:580},mapContainer:{margin:"48px 0"},secondWrapper:{display:"flex",justifyContent:"space-around",alignItems:"center"},temp:{display:"flex",flexDirection:"column",alignItems:"flex-end"}}),Gt=Et.a.icon({iconUrl:_t.a,shadowUrl:Mt.a,iconAnchor:[17,46]});Et.a.Marker.prototype.options.icon=Gt;var Bt=Object(l.a)((function(){var t=Object(i.useState)(!1),e=Object(m.a)(t,2),n=e[0],r=e[1],a=Object(i.useContext)(_).cities,c=Kt(),s=a.currentCity||{current:{},location:{}},u=s.city,l=s.country,d=s.state,h=s.location.coordinates,p=s.current,j=p.weather,b=p.pollution,y=J(null===j||void 0===j?void 0:j.ic,null===j||void 0===j?void 0:j.tp),g=Object(o.g)(),O=Object(o.h)(),x=Object(o.i)(),C=Object(i.useMemo)((function(){return(null===(t=null===O||void 0===O?void 0:O.search)||void 0===t?void 0:t.replace("?","").split("&").reduce((function(t,e){var n=null===e||void 0===e?void 0:e.split("="),i=Object(m.a)(n,2),r=i[0],a=i[1];return t[r]=a,t}),{}))||{};var t}),[null===O||void 0===O?void 0:O.search]).cityId,w=Object(i.useMemo)((function(){return n&&a.isLoaded}),[n,a.isLoaded]);function k(){return(k=Object(f.a)(v.a.mark((function t(e,n,i){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n!==i,!t.t0){t.next=4;break}return t.next=4,Promise.resolve(a.fetchCitiesForCountry(n,!0));case 4:a.loadCityWeather(Number(e));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(i.useEffect)((function(){!function(t,e,n){k.apply(this,arguments)}(C,x.country,a.currentCountry)}),[C,x.country,a.currentCountry]),Object(i.useEffect)((function(){r(!0)}),[]);var S=Array.isArray(h)?h:[],N=Object(m.a)(S,2),L=N[0],I=N[1];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Ft.a,{color:"primary",className:c.back,onClick:function(){return g.goBack()},children:Object(P.jsx)(Ht.a,{fontSize:"large"})}),Object(P.jsx)(kt.a,{className:c.container,children:w?Object(P.jsxs)(it.a,{className:c.wrapper,children:[Object(P.jsxs)(it.a,{className:c.weatherWrapper,children:[Object(P.jsx)("img",{className:c.weatherIcon,alt:"weather icon",src:null===y||void 0===y?void 0:y.weather}),Object(P.jsxs)(it.a,{children:[Object(P.jsx)(ft.a,{align:"center",paragraph:!0,variant:"h2",children:u}),Object(P.jsx)(ft.a,{align:"center",variant:"subtitle1",color:"textSecondary",children:d}),Object(P.jsx)(ft.a,{align:"center",variant:"subtitle2",children:l})]}),Object(P.jsxs)(it.a,{className:c.temp,children:[Object(P.jsxs)(it.a,{className:c.temperature,children:[Object(P.jsx)("img",{className:c.temperatureIcon,alt:"temperature icon",src:null===y||void 0===y?void 0:y.temperature}),Object(P.jsxs)(ft.a,{color:"primary",variant:"h2",children:[null===j||void 0===j?void 0:j.tp," \xb0C"]})]}),Object(P.jsx)(jt,{})]})]}),Object(P.jsxs)(it.a,{className:c.secondWrapper,children:[h&&Object(P.jsx)(it.a,{className:c.mapContainer,children:Object(P.jsxs)(Ut.a,{className:c.map,center:[I,L],zoom:6,scrollWheelZoom:!1,children:[Object(P.jsx)(Pt.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(P.jsx)(At.a,{position:[I,L],children:Object(P.jsxs)(Qt.a,{children:["A pretty CSS3 popup. ",Object(P.jsx)("br",{})," Easily customizable."]})})]})}),Object(P.jsxs)(it.a,{children:[Object(P.jsxs)(it.a,{className:c.data,children:[Object(P.jsx)("img",{className:c.icon,alt:"air pollution icon",src:null===y||void 0===y?void 0:y.pollution}),Object(P.jsxs)(ft.a,{variant:"h5",color:"textSecondary",children:[null===b||void 0===b?void 0:b.aqius," AQI"]})]}),Object(P.jsxs)(it.a,{className:c.data,children:[Object(P.jsx)("img",{className:c.icon,alt:"humidity icon",src:null===y||void 0===y?void 0:y.humidity}),Object(P.jsxs)(ft.a,{variant:"h5",color:"textSecondary",children:[null===j||void 0===j?void 0:j.hu," %"]})]}),Object(P.jsxs)(it.a,{className:c.data,children:[Object(P.jsx)("img",{className:c.icon,alt:"air pressure icon",src:null===y||void 0===y?void 0:y.pressure}),Object(P.jsxs)(ft.a,{variant:"h5",color:"textSecondary",children:[null===j||void 0===j?void 0:j.pr," hPa"]})]}),Object(P.jsxs)(it.a,{className:c.data,children:[Object(P.jsx)("img",{className:c.icon,alt:"wind speed icon",src:null===y||void 0===y?void 0:y.wind}),Object(P.jsxs)(ft.a,{variant:"h5",color:"textSecondary",children:[null===j||void 0===j?void 0:j.ws," m/s"]})]})]})]})]}):Object(P.jsx)(tt.a,{})})]})}));function Vt(){return Object(P.jsx)(o.a,{to:"/"})}function Jt(t){var e=Object(i.useContext)(t),n=Object(i.useState)(e.localization.isLoaded&&e.countries.isLoaded&&e.cities.isLoaded&&e.cityWeather.isLoaded),r=Object(m.a)(n,2),a=r[0],c=r[1],s=function(t){var e=Object(i.useRef)();return Object(i.useEffect)((function(){e.current=t}),[t]),e.current}(e.localization.coordinates);return Object(i.useEffect)((function(){a&&s===e.localization.coordinates||(!function(t){Yt.apply(this,arguments)}(Object(u.a)({},e)),c(!0))}),[a,e.localization.coordinates]),a}function Yt(){return(Yt=Object(f.a)(v.a.mark((function t(e){var n,i,r,a,c,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.localization,r=e.countries,a=e.cityWeather,c=e.cities,t.next=3,Promise.resolve(null===i||void 0===i?void 0:i.fetchGeoData(!0));case 3:return t.next=5,Promise.resolve(null===r||void 0===r?void 0:r.fetchCountries());case 5:return t.next=7,Promise.resolve(null===c||void 0===c?void 0:c.fetchCitiesForCountry(null===i||void 0===i?void 0:i.country));case 7:return s=null===c||void 0===c||null===(n=c.cities.find((function(t){return(null===t||void 0===t?void 0:t.city)===(null===i||void 0===i?void 0:i.locality)&&(null===t||void 0===t?void 0:t.state)===(null===i||void 0===i?void 0:i.region)})))||void 0===n?void 0:n.id,t.next=10,Promise.resolve(null===a||void 0===a?void 0:a.fetchLocalWeatherData(s));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Zt=Object(l.a)((function(t){var e=t.children,n=Jt(_);return Object(P.jsx)(P.Fragment,{children:n?Object(P.jsx)("div",{children:e}):Object(P.jsx)("div",{children:"loading..."})})}));function $t(t){var e=t.children;return Object(P.jsx)(s.a,{children:Object(P.jsxs)(Zt,{children:[e,Object(P.jsxs)(o.d,{children:[Object(P.jsx)(o.b,{path:"/",exact:!0,component:wt}),Object(P.jsx)(o.b,{path:"/country/:country",component:Rt}),Object(P.jsx)(o.b,{path:"/city/:country/:state/:city",component:Bt}),Object(P.jsx)(o.b,{component:Vt})]})]})})}var Xt=n(225);var te=function(){return Object(P.jsx)(M,{children:Object(P.jsx)(Xt.a,{className:"App",children:Object(P.jsx)($t,{})})})},ee=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,233)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),r(t),a(t),c(t)}))};c.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(te,{})}),document.getElementById("root")),ee()},73:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/humidity.dc71ee9b.svg"},74:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/windy.3f48d90e.svg"},75:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/pollution.4b652c47.svg"},76:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/pin.5a76726c.svg"},77:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/pressure.fbec89c3.svg"}},[[174,1,2]]]);
//# sourceMappingURL=main.31107255.chunk.js.map